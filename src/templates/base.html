{% load static %}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">

    <title>Codalab Competitions</title>

    <link rel="icon" type="image/ico" href="{% static 'img/favicon.ico' %}"/>

    <!-- Vendor -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.3.1/semantic.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/simplemde/latest/simplemde.min.css">
    <link rel="stylesheet" href="{% static "css/calendar.min.css" %}">
    {#    <script src="{% static "riot.tag" %}" type="riot/tag"></script>#}
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.css">

    <!-- Ours -->
    <link rel="stylesheet" href="{% static "generated/output.css" %}">

    {% block extra_head %}
    {% endblock %}
</head>
<body>
<!-- Following Menu -->
<div class="ui large top fixed hidden menu">
    <div class="ui container">
        <a href="{% url "pages:home" %}" class="item">Competitions</a>
        <a class="item">Chagle</a>
        <a class="item">Chalab</a>
        <a class="item">Chagrade</a>
        <div class="right menu">
            {% if user.is_authenticated %}
                <div class="item"><a class="ui inverted button" href="{% url "logout" %}">Logout</a></div>
            {% else %}
                <div class="item"><a class="ui inverted button" href="{% url "login" %}">Login</a></div>
                <a href="{% url "profiles:signup" %}" class="ui inverted button">Sign-up</a>
            {% endif %}
        </div>
    </div>
</div>
<!-- Sidebar Menu -->
<div class="ui vertical inverted sidebar menu">
    <a href="{% url "pages:home" %}" class="item">Competitions</a>
    <a class="item">Chagle</a>
    <a class="item">Chalab</a>
    <a class="item">Chagrade</a>
    {% if user.is_authenticated %}
        <a href="/accounts/logout" class="item">Logout</a>
    {% else %}
        <a href="/accounts/login" class="item">Login</a>
        <a href="{% url "profiles:signup" %}" class="item">Sign-up</a>
    {% endif %}
</div>
<!-- Page Contents -->
<div class="pusher">
    <div id="header" class="ui inverted vertical center aligned segment masthead
        {% block top_div_extra_class %}{% endblock %}">
        <div id="bg"></div>
        <div class="ui container">
            <div class="ui large secondary inverted menu">
                <a class="toc item">
                    <i class="sidebar icon"></i>
                </a>
                <a href="{% url "pages:home" %}" class="item">Competitions</a>
                <a class="item">Chagle</a>
                <a class="item">Chalab</a>
                <a class="item">Chagrade</a>
                <div class="right item">
                    {% if user.is_authenticated %}
                        <div class="ui inline dropdown">
                            <div class="text">
                                <i class="icon user outline"></i>
                                {{ request.user.name }}
                            </div>
                            <i class="dropdown icon"></i>
                            <div class="menu fix-right-bleed">
                                <div class="header">Your management</div>
                                <a class="item" href="{% url "competitions:management" %}">Competitions</a>
                                <a class="item" href="#">Teams</a>
                                <a class="item" href="{% url "datasets:management" %}">Datasets</a>
                                {% if request.user.is_staff %}
                                    <div class="ui divider"></div>
                                    <div class="header">Admin management</div>
                                    <a class="item" href="#">Customize Codalab</a>
                                    <a class="item" href="#">Monitors</a>
                                    <a class="item" href="#">Analytics</a>
                                    <a class="item" href="#">Health</a>
                                    <a class="item" href="#">Users</a>
                                    <a class="item" href="#">Submissions</a>
                                    <a class="item" href="#" onclick="$('#user_switch_modal').modal('show')">Switch
                                        User</a>
                                {% endif %}
                                <div class="ui divider"></div>
                                <div class="header">You</div>
                                <a class="item" href="#">
                                    <i class="icon user"></i>
                                    Edit profile
                                </a>
                                <a class="item" href="/accounts/logout/">
                                    <i class="icon sign out"></i>
                                    Logout
                                </a>
                            </div>
                        </div>
                    {% else %}
                        <a href="/accounts/login" class="ui inverted button">Login</a>
                        <a href="{% url "profiles:signup" %}" class="ui inverted button">Sign-up</a>
                    {% endif %}
                </div>
            </div>
        </div>
        {% block top_div_extra_content %}{% endblock %}
    </div>
    <div class="ui container grid">
        <div class="row">
            {% block content %}
            {% endblock %}
        </div>
    </div>
    <div class="ui inverted vertical footer segment">
        <div class="ui container">
            <div class="ui stackable inverted divided equal height stackable grid">
                <div class="three wide column">
                    <h4 class="ui inverted header">About</h4>
                    <div class="ui inverted link list">
                        <a href="#" class="item">Sitemap</a>
                        <a href="#" class="item">Contact Us</a>
                        <a href="#" class="item">Religious Ceremonies</a>
                        <a href="#" class="item">Gazebo Plans</a>
                    </div>
                </div>
                <div class="three wide column">
                    <h4 class="ui inverted header">Services</h4>
                    <div class="ui inverted link list">
                        <a href="#" class="item">Banana Pre-Order</a>
                        <a href="#" class="item">DNA FAQ</a>
                        <a href="#" class="item">How To Access</a>
                        <a href="#" class="item">Favorite X-Men</a>
                    </div>
                </div>
                <div class="seven wide column">
                    <h4 class="ui inverted header">Footer Header</h4>
                    <p>Extra space for a call to action inside the footer that could help re-engage users.</p>
                </div>
            </div>
        </div>
    </div>
</div>

{# Admin only user switching #}
<user_switch></user_switch>

<!-- Vendor -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/riot/3.6.1/riot+compiler.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.3.1/semantic.min.js"
        integrity="sha256-RKNmL9+6j/3jB72OcIg8OQr91Bi4OgFPnKQOFS1O+fo=" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/particles.js/2.0.0/particles.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.js"></script>
<script src="{% static "js/calendar.min.js" %}"></script>
<script src="https://cdn.jsdelivr.net/simplemde/latest/simplemde.min.js"></script>

<!-- Ours -->
<script src="{% static "generated/riot.js" %}"></script>
<script src="{% static "js/ours/utils.js" %}"></script>
<script src="{% static "js/ours/client.js" %}"></script>
<script src="{% static "js/ours/init.js" %}"></script>
<script src="{% static "js/jquery.form.serializer.js" %}"></script>

<script>
    // Load in URLs or other django generated goodies
    URLS = {
        assets: {
            header_particles: "{% static "particles/header.json" %}"
        },
        API: "/api/",

        // Competitions
        COMPETITION_ADD: "{% url "competitions:create" %}",
        COMPETITION_DETAIL: function (pk) {
            return "{% url "competitions:detail" pk=0 %}".replace(0, pk)
        },
        COMPETITION_EDIT: function (pk) {
            return "{% url "competitions:edit" pk=0 %}".replace(0, pk)
        },

        // Datasets
        DATASET_MANAGEMENT: "{% url "datasets:management" %}",
        DATASET_DOWNLOAD: function(key) {
            return "{% url "datasets:download" key=0 %}".replace(0, key)
        }
    }

    // Django returns <input type="hidden" value="csrf-token-secret"> so we just grab the `value` attribute from this
    CSRF_TOKEN = $('{% csrf_token %}').attr('value')
</script>

{% block extra_body %}
{% endblock %}

</body>
</html>

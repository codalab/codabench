{% load static %}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
    <title>Codalab Competitions</title>
    <link rel="icon" type="image/ico" href="{% static 'img/favicon.ico' %}"/>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/riot/3.6.1/riot+compiler.min.js"></script>


    <link rel="stylesheet" href="https://cdn.jsdelivr.net/semantic-ui/2.2.10/semantic.min.css">
    <script src="https://cdn.jsdelivr.net/semantic-ui/2.2.10/semantic.min.js"></script>




    <link rel="stylesheet" href="https://cdn.jsdelivr.net/simplemde/latest/simplemde.min.css">
    <script src="https://cdn.jsdelivr.net/simplemde/latest/simplemde.min.js"></script>



    <link rel="stylesheet" href="{% static "css/calendar.min.css" %}">
    <script src="{% static "js/calendar.min.js" %}"></script>

    <script src="{% static "riot/competition_list.tag" %}" type="riot/tag"></script>
    <script src="{% static "riot/search.tag" %}" type="riot/tag"></script>


    <script src="{% static "js/ours/utils.js" %}"></script>
    <script src="{% static "js/ours/client.js" %}"></script>
    <script src="{% static "js/ours/init.js" %}"></script>

    <link rel="stylesheet" href="{% static "output.css" %}">

    <script src="https://cdn.jsdelivr.net/particles.js/2.0.0/particles.min.js"></script>

    <script>
        particlesJS.load('bg', "{% static "particles/header.json" %}")
    </script>
</head>
<body>

<!-- Following Menu -->
<div class="ui large top fixed hidden menu">
    <div class="ui container">
        <a href="{% url "pages:home" %}" class="active item">Competitions</a>
        <a class="item">Chagle</a>
        <a class="item">Chalab</a>
        <a class="item">Chagrade</a>
        <div class="right menu">
            <div class="item">
                <a class="ui button">Log in</a>
            </div>
            <div class="item">
                <a class="ui primary button">Sign Up</a>
            </div>
        </div>
    </div>
</div>

<!-- Sidebar Menu -->
<div class="ui vertical inverted sidebar menu">
    <a href="{% url "pages:home" %}" class="active item">Competitions</a>
    <a class="item">Chagle</a>
    <a class="item">Chalab</a>
    <a class="item">Chagrade</a>
    <a class="item">Login</a>
    <a class="item">Signup</a>
</div>


<!-- Page Contents -->
<div class="pusher">
    <div id="header" class="ui inverted vertical center aligned segment masthead {% block top_div_extra_class %}{% endblock %}">
        <div id="bg"></div>
        <div class="ui container">
            <div class="ui large secondary inverted menu">
                <a class="toc item">
                    <i class="sidebar icon"></i>
                </a>
                <a href="{% url "pages:home" %}" class="active item">Competitions</a>
                <a class="item">Chagle</a>
                <a class="item">Chalab</a>
                <a class="item">Chagrade</a>
                <div class="right item">
                    <a class="ui inverted button">Log in</a>
                    <a class="ui inverted button">Sign Up</a>
                </div>
            </div>
        </div>

        {% block top_div_extra_content %}{% endblock %}
    </div>

    {% block content %}

    {% endblock %}


    <div class="ui inverted vertical footer segment">
        <div class="ui container">
            <div class="ui stackable inverted divided equal height stackable grid">
                <div class="three wide column">
                    <h4 class="ui inverted header">About</h4>
                    <div class="ui inverted link list">
                        <a href="#" class="item">Sitemap</a>
                        <a href="#" class="item">Contact Us</a>
                        <a href="#" class="item">Religious Ceremonies</a>
                        <a href="#" class="item">Gazebo Plans</a>
                    </div>
                </div>
                <div class="three wide column">
                    <h4 class="ui inverted header">Services</h4>
                    <div class="ui inverted link list">
                        <a href="#" class="item">Banana Pre-Order</a>
                        <a href="#" class="item">DNA FAQ</a>
                        <a href="#" class="item">How To Access</a>
                        <a href="#" class="item">Favorite X-Men</a>
                    </div>
                </div>
                <div class="seven wide column">
                    <h4 class="ui inverted header">Footer Header</h4>
                    <p>Extra space for a call to action inside the footer that could help re-engage users.</p>
                </div>
            </div>
        </div>
    </div>
</div>


<script>
    CODALAB.URLS = {
        API: "/api/"
    }


    $('.ui.search')
        .search({
            type: 'category',
            minCharacters: 1,
            apiSettings: {
                onResponse: function (githubResponse) {
                    var data = {
                        results: {}
                    }
                    data["results"]["test"] = {
                        name: "Submissions",
                        results: [{
                            title: "submission.zip",
                            description: "By changing so and so I was able to double my score for liver segmentation, I think it has to do with blah blah blah",
                            url: "http://"
                        }, {
                            title: "starting_kit.zip",
                            description: "My starting kit submission for liver segmentation",
                            url: "http://"
                        }]
                    }
                    data["results"]["worksheets"] = {
                        name: "Worksheets",
                        results: [{
                            title: "Liver segmentation example worksheet",
                            description: "Step-by-step through a machine learning example for liver segmentation, with example data",
                            url: "http://"
                        }, {
                            title: "Liver segmentation submission example",
                            description: "You can tweak the code in this worksheet and at the end a valid submission zip is output",
                            url: "http://"
                        }]
                    }
                    {##}
                    {#                                // translate GitHub API response to work with search#}
                    {#                                $.each(githubResponse.items, function (index, item) {#}
                    {#                                    var#}
                    {#                                        language = item.language || 'Unknown',#}
                    {#                                        maxResults = 8#}
                    {##}
                    {#                                    if (index >= maxResults) {#}
                    {#                                        return false#}
                    {#                                    }#}
                    {#                                    // create new language category#}
                    {#                                    if (response.results[language] === undefined) {#}
                    {#                                        response.results[language] = {#}
                    {#                                            name: language,#}
                    {#                                            results: []#}
                    {#                                        }#}
                    {#                                    }#}
                    {#                                    // add result to category#}
                    {#                                    response.results[language].results.push({#}
                    {#                                        title: item.name,#}
                    {#                                        description: item.description,#}
                    {#                                        url: item.html_url#}
                    {#                                    })#}
                    {#                                });#}
                    return data;
                },
                url: '//api.github.com/search/repositories?q={query}'
            }
        })

        
          $(document)
    .ready(function() {

      // fix menu when passed
      $('.masthead')
        .visibility({
          once: false,
          onBottomPassed: function() {
            $('.fixed.menu').transition('fade in');
          },
          onBottomPassedReverse: function() {
            $('.fixed.menu').transition('fade out');
          }
        })
      ;

      // create sidebar and attach to menu open
      $('.ui.sidebar')
        .sidebar('attach events', '.toc.item')
      ;

    })

    riot.mount('*')
</script>

</body>
</html>

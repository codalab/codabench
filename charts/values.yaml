caddy:
  image:
    repository: caddy
    tag: 2.7.6

django:
  image: 
    repository: ghcr.io/k402xxxcenxxx/codabench/base
    tag: v1.0.0

minio:
  image: 
    repository: minio/minio
    tag: RELEASE.2020-10-03T02-19-42Z

builder:
  image: 
    repository: ghcr.io/k402xxxcenxxx/codabench/builder
    tag: v1.0.0

postgres:
  image: 
    repository: postgres
    tag: 12-alpine

rabbit:
  image: 
    repository: ghcr.io/k402xxxcenxxx/codabench/rabbitmq
    tag: v1.0.0

flower:
  image: 
    repository: ghcr.io/k402xxxcenxxx/codabench/flower
    tag: v1.0.0

redis:
  image: 
    repository: redis
    tag: latest

computeWorker:
  image: 
    repository: ghcr.io/k402xxxcenxxx/codabench/compute_worker
    tag: v1.0.0

image:
  caddy: caddy:2.7.6
  minio: minio/minio:RELEASE.2020-10-03T02-19-42Z
  postgres: postgres:12-alpine
  redis: redis
  django: ghcr.io/k402xxxcenxxx/codabench/base:develop
  builder: ghcr.io/k402xxxcenxxx/codabench/builder:develop
  rabbitmq: ghcr.io/k402xxxcenxxx/codabench/rabbitmq:develop
  flower: ghcr.io/k402xxxcenxxx/codabench/flower:develop
  siteWorker: ghcr.io/k402xxxcenxxx/codabench/base:develop
  computeWorker: ghcr.io/k402xxxcenxxx/codabench/compute_worker:develop

env:
  SECRET_KEY: "change-this-secret"

  DB_HOST: "db"
  DB_NAME: "postgres"
  DB_USERNAME: "postgres"
  DB_PASSWORD: "postgres"
  DB_PORT: 5432

  DJANGO_SETTINGS_MODULE: "settings.develop"
  ALLOWED_HOSTS: "localhost,example.com"
  SUBMISSIONS_API_URL: "http://django:8000/api"
  MAX_EXECUTION_TIME_LIMIT: 600

  DOMAIN_NAME: "localhost:80"
  TLS_EMAIL: "your@email.com"

  RABBITMQ_HOST: "rabbit"
  RABBITMQ_DEFAULT_USER: "rabbit-username"
  RABBITMQ_DEFAULT_PASS: "rabbit-password-you-should-change"
  RABBITMQ_MANAGEMENT_PORT: 15672
  RABBITMQ_PORT: 5672
  WORKER_CONNECTION_TIMEOUT: 100000000

  FLOWER_PUBLIC_PORT: 5555
  FLOWER_BASIC_AUTH: "root:password-you-should-change"

  SELENIUM_HOSTNAME: "selenium"

  MINIO_ACCESS_KEY: "testkey"
  MINIO_SECRET_KEY: "testsecret"
  MINIO_PORT: 9000

  AWS_ACCESS_KEY_ID: "testkey"
  AWS_SECRET_ACCESS_KEY: "testsecret"
  AWS_STORAGE_BUCKET_NAME: "public"
  AWS_STORAGE_PRIVATE_BUCKET_NAME: "private"
  AWS_S3_ENDPOINT_URL: "http://minio:9000/"
  AWS_QUERYSTRING_AUTH: "False"

  RERUN_SUBMISSION_LIMIT: 30

  ENABLE_SIGN_UP: "True"
  ENABLE_SIGN_IN: "True"


resources:
  limits:
    memory: 256Mi

services:
  caddy:
    type: ClusterIP
    port: 80
  django:
    type: ClusterIP
    port: 8000
  minio:
    type: ClusterIP
    port: 9000
  postgres:
    type: ClusterIP
    port: 5432
  rabbitmq:
    type: ClusterIP
    port: 5672
  redis:
    type: ClusterIP
    port: 6379
  builder:
    type: ClusterIP
    port: 80
  flower:
    type: ClusterIP
    port: 5555
  siteWorker:
    type: ClusterIP
    port: 80
  computeWorker:
    type: ClusterIP
    port: 80

{% load static %}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
    <title>Codalab Competitions</title>
    <link rel="icon" type="image/ico" href="{% static 'img/favicon.ico' %}"/>

    <!-- Vendor -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.3.1/semantic.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/simplemde/latest/simplemde.min.css">
    <link rel="stylesheet" href="{% static "css/calendar.min.css" %}">
    {#    <script src="{% static "riot.tag" %}" type="riot/tag"></script>#}
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.css">
    <link href="https://fonts.googleapis.com/css?family=Roboto" rel="stylesheet">

    <!-- Ours -->
    <link rel="stylesheet" href="{% static "generated/output.css" %}">

    {% block extra_head %}
    {% endblock %}
</head>
<body>

<div class="navbar-placeholder"></div>
<div id="bg" class="ui top fixed menu nav-bar">
    <canvas class="particles-js-canvas-el">
        <div class="right floated ui button">asdf</div>
    </canvas>
    <a href="{% url "pages:home" %}" class="item"><img class="image"
                                                       src="{% static 'img/codalab-logo-futuraLT-light2.png' %}"></a>
    <a href="{% url "pages:home" %}" class="tl item">Competitions</a>
    <a class="tl item">Chagle</a>
    <a class="tl item">Chalab</a>
    <a class="tl item">Chagrade</a>
    {% if user.is_authenticated %}
        <div class="button-container">
            <button class="right floated ui button">Logout</button>
            <button class="right floated ui button">Profile</button>
        </div>
    {% else %}
        <div class="button-container">
            <button class="right floated ui button">Login</button>
        </div>
    {% endif %}

</div>

{% block content %}
{% endblock %}

{# Admin only user switching #}
<user_switch></user_switch>

<!-- Vendor -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/riot/3.6.1/riot+compiler.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.3.1/semantic.min.js"
        integrity="sha256-RKNmL9+6j/3jB72OcIg8OQr91Bi4OgFPnKQOFS1O+fo=" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/particles.js/2.0.0/particles.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.js"></script>
<script src="{% static "js/calendar.min.js" %}"></script>
<script src="https://cdn.jsdelivr.net/simplemde/latest/simplemde.min.js"></script>

<!-- Ours -->
<script src="{% static "js/ours/client.js" %}"></script>
<script src="{% static "js/ours/init.js" %}"></script>
<script src="{% static "js/ours/riotjs_mixins.js" %}"></script>
<script src="{% static "js/ours/utils.js" %}"></script>
<script src="{% static "js/jquery.form.serializer.js" %}"></script>
<script src="{% static "js/Chart.bundle.js" %}"></script>
<script src="{% static "js/reconnecting-websocket.min.js" %}"></script>
<script src="{% static "generated/riot.js" %}"></script>

<script>
    {# From `common_settings` context processor #}
    STORAGE_TYPE = "{{ STORAGE_TYPE }}"

    // Load in URLs or other django generated goodies
    URLS = {
        assets: {
            header_particles: "{% static "particles/header.json" %}"
        },
        API: "/api/",

        // Websockets
        //WS_SUBMISSION_LISTEN: ""

        // Competitions
        COMPETITION_UPLOAD: "{% url "competitions:upload" %}",
        COMPETITION_ADD: "{% url "competitions:create" %}",
        COMPETITION_DETAIL: function (pk) {
            return "{% url "competitions:detail" pk=0 %}".replace(0, pk)
        },
        COMPETITION_EDIT: function (pk) {
            return "{% url "competitions:edit" pk=0 %}".replace(0, pk)
        },

        // Datasets
        DATASET_MANAGEMENT: "{% url "datasets:management" %}",
        DATASET_DOWNLOAD: function (key) {
            return "{% url "datasets:download" key=0 %}".replace(0, key)
        }
    }

    USER_AUTHENTICATED = "{{ user.is_authenticated }}" === "True"

    // Django returns <input type="hidden" value="csrf-token-secret"> so we just grab the `value` attribute from this
    CSRF_TOKEN = $('{% csrf_token %}').attr('value')
</script>

{% block extra_body %}
{% endblock %}

</body>
<footer class="ui footer segment">
    <div class="ui horizontal link list">
        <a class="item" href="https://github.com/codalab/competitions-v2/issues">
            <i class="github icon"></i>
            Join us on Github for contact & Bug Reports.
        </a>
        <a class="item">
            Work In Progress - Version 0.1
        </a>
    </div>
</footer>
</html>
